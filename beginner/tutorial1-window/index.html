<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dependencies and the window | Learn Wgpu</title>
    <meta name="description" content="">
    
    <meta property="article:modified_time" content="2020-01-11T22:55:08.000Z"><meta property="og:site_name" content="Learn Wgpu"><meta property="og:title" content="Dependencies and the window"><meta property="og:type" content="website"><meta property="og:url" content="/beginner/tutorial1-window/"><meta name="twitter:title" content="Dependencies and the window"><meta name="twitter:url" content="/beginner/tutorial1-window/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Benjamin R Hansen"><meta name="twitter:creator" content="https://twitter.com/sotrh760">
    <link rel="preload" href="/learn-wgpu/assets/css/0.styles.0d5558e3.css" as="style"><link rel="preload" href="/learn-wgpu/assets/js/app.8a1738c0.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/2.d19aef70.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/14.b2074250.js" as="script"><link rel="preload" href="/learn-wgpu/assets/js/11.58dde77c.js" as="script"><link rel="prefetch" href="/learn-wgpu/assets/js/10.f501ae10.js"><link rel="prefetch" href="/learn-wgpu/assets/js/12.45a383b2.js"><link rel="prefetch" href="/learn-wgpu/assets/js/13.25685ba8.js"><link rel="prefetch" href="/learn-wgpu/assets/js/15.a1365c35.js"><link rel="prefetch" href="/learn-wgpu/assets/js/16.7080afa4.js"><link rel="prefetch" href="/learn-wgpu/assets/js/17.3b471c02.js"><link rel="prefetch" href="/learn-wgpu/assets/js/18.32b0128e.js"><link rel="prefetch" href="/learn-wgpu/assets/js/3.0b09a00d.js"><link rel="prefetch" href="/learn-wgpu/assets/js/4.b776a6f8.js"><link rel="prefetch" href="/learn-wgpu/assets/js/5.b454fc3c.js"><link rel="prefetch" href="/learn-wgpu/assets/js/6.3c2f3e23.js"><link rel="prefetch" href="/learn-wgpu/assets/js/7.b5ee414b.js"><link rel="prefetch" href="/learn-wgpu/assets/js/8.9a357271.js"><link rel="prefetch" href="/learn-wgpu/assets/js/9.df27a114.js">
    <link rel="stylesheet" href="/learn-wgpu/assets/css/0.styles.0d5558e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="inner"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-wgpu/" class="home-link router-link-active"><!----> <span class="site-name">Learn Wgpu</span></a> <div class="links"><!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header> <div class="sidebar-mask"></div> <div class="docs-layout"><aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/learn-wgpu/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Beginner</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu/beginner/tutorial1-window/" class="active sidebar-link">Dependencies and the window</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial1-window/#boring-i-know" class="sidebar-link">Boring, I know</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial1-window/#what-crates-are-we-using" class="sidebar-link">What crates are we using?</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial1-window/#what-s-with-the-alpha-stuff" class="sidebar-link">What's with the &quot;alpha&quot; stuff?</a></li><li class="sidebar-sub-header"><a href="/learn-wgpu/beginner/tutorial1-window/#the-code" class="sidebar-link">The code</a></li></ul></li><li><a href="/learn-wgpu/beginner/tutorial2-swapchain/" class="sidebar-link">The Swapchain</a></li><li><a href="/learn-wgpu/beginner/tutorial3-pipeline/" class="sidebar-link">The Pipeline</a></li><li><a href="/learn-wgpu/beginner/tutorial4-buffer/" class="sidebar-link">Buffers and Indices</a></li><li><a href="/learn-wgpu/beginner/tutorial5-textures/" class="sidebar-link">Textures and bind groups</a></li><li><a href="/learn-wgpu/beginner/tutorial6-uniforms/" class="sidebar-link">Uniform buffers and a 3d camera</a></li><li><a href="/learn-wgpu/beginner/tutorial7-instancing/" class="sidebar-link">Instancing</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Intermediate</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-wgpu/intermediate/windowless/" class="sidebar-link">Wgpu without a window</a></li></ul></section></li><li><a href="/learn-wgpu/news/" class="sidebar-link">News</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dependencies-and-the-window"><a href="#dependencies-and-the-window" class="header-anchor">#</a> Dependencies and the window</h1> <h2 id="boring-i-know"><a href="#boring-i-know" class="header-anchor">#</a> Boring, I know</h2> <p>Some of you reading this are very experienced with opening up windows in Rust and probably have your favorite windowing library, but this guide is designed for everybody, so it's something that we need to cover. Luckily, if you don't need to read this if you know what you're doing. One thing that you do need to know is that whatever windowing solution you use needs to support the <a href="https://github.com/rust-windowing/raw-window-handle" target="_blank" rel="noopener noreferrer">raw-window-handle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> crate.</p> <h2 id="what-crates-are-we-using"><a href="#what-crates-are-we-using" class="header-anchor">#</a> What crates are we using?</h2> <p>For the beginner stuff, we're going to keep things very simple, we'll add things as we go, but I've listed the relevant <code>Cargo.toml</code> bits below.</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">image</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.22&quot;</span>
<span class="token key property">winit</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.20&quot;</span>
<span class="token key property">wgpu</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4&quot;</span>
</code></pre></div><p>If you're on Windows, you can specify Vulkan as you desired backend by removing the <code>wgpu = &quot;0.4&quot;</code> and adding the following.</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">dependencies.wgpu</span><span class="token punctuation">]</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.4&quot;</span>
<span class="token key property">features</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;vulkan&quot;</span><span class="token punctuation">]</span>
</code></pre></div> <h2 id="what-s-with-the-alpha-stuff"><a href="#what-s-with-the-alpha-stuff" class="header-anchor">#</a> What's with the &quot;alpha&quot; stuff?</h2> <p>The wgpu examples use this version of <a href="https://github.com/rust-windowing/winit" target="_blank" rel="noopener noreferrer">winit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, so I elected to do the same. <em>Note: I'll update this once the changes to winit become fully released.</em></p> <h2 id="the-code"><a href="#the-code" class="header-anchor">#</a> The code</h2> <p>There's not much going on here yet, so I'm just going to post the code in full. Just paste this into you're <code>main.rs</code> or equivalent.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">use</span> winit<span class="token punctuation">::</span><span class="token punctuation">{</span>
    event<span class="token punctuation">::</span><span class="token operator">*</span><span class="token punctuation">,</span>
    event_loop<span class="token punctuation">::</span><span class="token punctuation">{</span>EventLoop<span class="token punctuation">,</span> ControlFlow<span class="token punctuation">}</span><span class="token punctuation">,</span>
    window<span class="token punctuation">::</span><span class="token punctuation">{</span>WindowBuilder<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> event_loop <span class="token operator">=</span> EventLoop<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> window <span class="token operator">=</span> WindowBuilder<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>event_loop<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    event_loop<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token punctuation">|</span>event<span class="token punctuation">,</span> _<span class="token punctuation">,</span> control_flow<span class="token punctuation">|</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> event <span class="token punctuation">{</span>
            Event<span class="token punctuation">::</span>WindowEvent <span class="token punctuation">{</span>
                <span class="token keyword">ref</span> event<span class="token punctuation">,</span>
                window_id<span class="token punctuation">,</span>
            <span class="token punctuation">}</span> <span class="token keyword">if</span> window_id <span class="token operator">==</span> window<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">match</span> event <span class="token punctuation">{</span>
                WindowEvent<span class="token punctuation">::</span>CloseRequested <span class="token operator">=&gt;</span> <span class="token operator">*</span>control_flow <span class="token operator">=</span> ControlFlow<span class="token punctuation">::</span>Exit<span class="token punctuation">,</span>
                WindowEvent<span class="token punctuation">::</span>KeyboardInput <span class="token punctuation">{</span>
                    input<span class="token punctuation">,</span>
                    <span class="token punctuation">..</span>
                <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">match</span> input <span class="token punctuation">{</span>
                        KeyboardInput <span class="token punctuation">{</span>
                            state<span class="token punctuation">:</span> ElementState<span class="token punctuation">::</span>Pressed<span class="token punctuation">,</span>
                            virtual_keycode<span class="token punctuation">:</span> <span class="token function">Some</span><span class="token punctuation">(</span>VirtualKeyCode<span class="token punctuation">::</span>Escape<span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token punctuation">..</span>
                        <span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token operator">*</span>control_flow <span class="token operator">=</span> ControlFlow<span class="token punctuation">::</span>Exit<span class="token punctuation">,</span>
                        _ <span class="token operator">=&gt;</span> <span class="token operator">*</span>control_flow <span class="token operator">=</span> ControlFlow<span class="token punctuation">::</span>Wait<span class="token punctuation">,</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                _ <span class="token operator">=&gt;</span> <span class="token operator">*</span>control_flow <span class="token operator">=</span> ControlFlow<span class="token punctuation">::</span>Wait<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            _ <span class="token operator">=&gt;</span> <span class="token operator">*</span>control_flow <span class="token operator">=</span> ControlFlow<span class="token punctuation">::</span>Wait<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All this does is create a window, and keep it open until until user closes it, or presses escape. Next tutorial we'll actually start using wgpu!</p> <div class="auto-github-link"><a href="https://github.com/sotrh/learn-wgpu/tree/master/code/beginner/tutorial1-window/" target="_blank" rel="noopener noreferrer">Check out the code!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/11/2020, 3:55:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/learn-wgpu/" class="prev router-link-active">
          Introduction
        </a></span> <span class="next"><a href="/learn-wgpu/beginner/tutorial2-swapchain/">
          The Swapchain
        </a>
        →
      </span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/learn-wgpu/assets/js/app.8a1738c0.js" defer></script><script src="/learn-wgpu/assets/js/2.d19aef70.js" defer></script><script src="/learn-wgpu/assets/js/14.b2074250.js" defer></script><script src="/learn-wgpu/assets/js/11.58dde77c.js" defer></script>
  </body>
</html>
